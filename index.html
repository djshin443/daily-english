<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>iOS 배경 수정 테스트</title>
    <style>
        /* iOS 배경 문제 해결을 위한 핵심 CSS 수정 */
        
        :root {
            /* CSS 변수를 고정값으로 변경 (iOS 호환성) */
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.25);
        }

        body {
            font-family: 'Jua', sans-serif;
            /* 기존 그라디언트 + 강력한 fallback */
            background: #667eea; /* 단색 fallback */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            color: #1a202c;
            
            /* iOS 전용 설정 추가 */
            -webkit-background-size: cover;
            background-size: cover;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }

        /* iOS Safari 전용 스타일 */
        @supports (-webkit-appearance: none) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
                background-attachment: scroll !important; /* iOS에서 fixed 문제 해결 */
            }
        }

        /* 글래스 효과 카드들 - iOS 호환성 개선 */
        .glass-card {
            /* backdrop-filter 지원하지 않는 경우를 위한 강력한 fallback */
            background: rgba(255, 255, 255, 0.25) !important;
            
            /* backdrop-filter 지원하는 경우만 적용 */
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            margin: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        /* iOS에서 backdrop-filter가 지원되지 않는 경우 */
        @supports not (backdrop-filter: blur(15px)) {
            .glass-card {
                background: rgba(102, 126, 234, 0.8) !important; /* 더 진한 배경 */
                border: 2px solid rgba(255, 255, 255, 0.5);
            }
        }

        /* 저전력 모드 대응 */
        @media (prefers-reduced-transparency: reduce) {
            .glass-card {
                background: rgba(102, 126, 234, 0.9) !important;
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
            }
        }

        /* 테스트용 카드들 */
        .test-card {
            color: white;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .main-title {
            font-size: 3rem;
            color: white;
            text-align: center;
            margin: 40px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* iOS 감지 및 강제 스타일 적용 */
        .ios-force {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            min-height: 100vh !important;
        }
    </style>
</head>
<body>
    <h1 class="main-title">iOS 배경 테스트</h1>
    
    <div class="glass-card test-card">
        <h2>테스트 카드 1</h2>
        <p>이 카드가 투명한 글래스 효과로 보이나요?</p>
        <p>배경이 보라색-파란색 그라디언트인가요?</p>
    </div>
    
    <div class="glass-card test-card">
        <h2>테스트 카드 2</h2>
        <p>iOS Safari에서 확인 중...</p>
        <p id="browser-info">브라우저 정보 로딩 중...</p>
    </div>
    
    <div class="glass-card test-card">
        <h2>테스트 카드 3</h2>
        <p>모든 카드가 흰색 배경이면 문제가 있는 것입니다.</p>
        <button onclick="forceIOSFix()" style="padding: 10px 20px; margin: 10px; background: #ff6b6b; color: white; border: none; border-radius: 10px;">iOS 강제 수정</button>
    </div>

    <script>
        // 브라우저 정보 표시
        document.getElementById('browser-info').innerHTML = `
            User Agent: ${navigator.userAgent.substring(0, 50)}...<br>
            iOS 감지: ${/iPad|iPhone|iPod/.test(navigator.userAgent)}<br>
            Safari 감지: ${/Safari/.test(navigator.userAgent)}<br>
            backdrop-filter 지원: ${CSS.supports('backdrop-filter', 'blur(10px)')}<br>
        `;

        // iOS 강제 수정 함수
        function forceIOSFix() {
            console.log('iOS 강제 수정 적용...');
            
            // body에 강제 스타일 적용
            document.body.className = 'ios-force';
            document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            document.body.style.backgroundAttachment = 'scroll';
            
            // 모든 글래스 카드에 강제 스타일 적용
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach(card => {
                card.style.background = 'rgba(102, 126, 234, 0.7)';
                card.style.border = '2px solid rgba(255, 255, 255, 0.5)';
                card.style.backdropFilter = 'none';
                card.style.webkitBackdropFilter = 'none';
            });
            
            alert('강제 수정이 적용되었습니다. 배경이 보라색으로 변했나요?');
        }

        // 페이지 로드 시 iOS 감지 및 자동 수정
        window.addEventListener('load', function() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);
            
            if (isIOS || isSafari) {
                console.log('iOS/Safari 감지됨 - 배경 호환성 모드 적용');
                
                // 3초 후 자동으로 확인
                setTimeout(() => {
                    const shouldFix = confirm('배경이 흰색으로 보이시나요? "확인"을 누르면 호환성 모드를 적용합니다.');
                    if (shouldFix) {
                        forceIOSFix();
                    }
                }, 3000);
            }
        });
    </script>
</body>
</html>
